<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spyfall TÃ¼rkÃ§e</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen active">
        <div class="container">
            <div class="header">
                <h1 class="title">ğŸ•µï¸ Spyfall TÃ¼rkÃ§e</h1>
                <p class="subtitle">Kim casus?</p>
            </div>
            
            <div class="menu-actions">
                <button id="createRoomBtn" class="btn btn-primary">
                    <span>ğŸ </span>
                    Oda OluÅŸtur
                </button>
                
                <div class="join-room">
                    <input type="text" id="roomCodeInput" placeholder="Oda Kodunu Girin" maxlength="6">
                    <input type="text" id="playerNameInput" placeholder="AdÄ±nÄ±zÄ± Girin" maxlength="20">
                    <button id="joinRoomBtn" class="btn btn-secondary">
                        <span>ğŸšª</span>
                        Odaya KatÄ±l
                    </button>
                </div>
            </div>
            
            <div class="rules">
                <h3>ğŸ“‹ Oyun KurallarÄ±</h3>
              
                <!-- Ã–zet Bilgiler -->
                <ul>
                  <li><strong>AmaÃ§:</strong> Casus olmayan oyuncularÄ±n (VatandaÅŸlar) casusu bulmasÄ±; casusun ise yakalanmadan oyunu tamamlamasÄ±</li>
                  <li><strong>SÃ¼re:</strong> 8 dakika (Ã¶nerilen)</li>
                  <li><strong>Oyuncu SayÄ±sÄ±:</strong> 4â€“8 kiÅŸi</li>
                  <li><strong>NasÄ±l OynanÄ±r:</strong> Oyuncular, lokasyonu aÃ§Ä±k etmeden soru-cevap Ã¼zerinden birbirlerini yoklar; Casus (Spy) konumu tahmin etmeye, VatandaÅŸlar (Citizens) casusu bulmaya Ã§alÄ±ÅŸÄ±r</li>
                </ul>
              
                <!-- Roller -->
                <h4>ğŸ­ Roller</h4>
                <ul>
                  <li><strong>Casus (Spy):</strong> Oyunun baÅŸÄ±nda <em>konumu bilmez</em>. SorularÄ±/cevaplarÄ± dikkatle dinleyerek konumu anlamaya Ã§alÄ±ÅŸÄ±r; ÅŸÃ¼phe Ã§ekmeden yanÄ±t verip doÄŸru anÄ± kollayarak konumu tahmin edebilir.</li>
                  <li><strong>VatandaÅŸlar (Citizens):</strong> AynÄ± konumu bilir. Konumu <em>doÄŸrudan sÃ¶ylemeden</em> ipuÃ§larÄ±yla birbirini tartar; tutarsÄ±z veya aÅŸÄ±rÄ± genel cevaplarÄ± iÅŸaretleyip oylamada casusu aÃ§Ä±ÄŸa Ã§Ä±karmaya Ã§alÄ±ÅŸÄ±r.</li>
                </ul>
              
                <!-- Oyun AkÄ±ÅŸÄ± -->
                <h4>â–¶ï¸ Oyun AkÄ±ÅŸÄ±</h4>
                <ol>
                  <li><strong>Rol DaÄŸÄ±tÄ±mÄ±:</strong> Her oyuncuya gizlice rol verilir. Casus sadece casus olduÄŸunu, VatandaÅŸlar ise ortak konumu gÃ¶rÃ¼r.</li>
                  <li><strong>Soruâ€“Cevap TurlarÄ±:</strong> Saat yÃ¶nÃ¼nde (veya belirlediÄŸiniz sÄ±rayla) herkes bir kiÅŸiye konumla ilgili soru sorar. 
                    <br><em>Ã–rn:</em> â€œBurada gÃ¼rÃ¼ltÃ¼ normal mi?â€, â€œBuraya gelirken Ã¶zel bir kÄ±yafet gerekir mi?â€</li>
                  <li><strong>Cevaplar:</strong> Sorulan kiÅŸi kÄ±sa ve tutarlÄ± cevap verir. Ã‡ok genel cevaplar ÅŸÃ¼phe Ã§ekebilir; Ã§ok spesifik cevaplar ise konumu aÃ§Ä±ÄŸa Ã§Ä±karabilir.</li>
                  <li><strong>SuÃ§lama &amp; Oylama:</strong> Her an bir oyuncu birini <em>Casus</em> olmakla suÃ§layabilir. Hemen oylama yapÄ±lÄ±r; <em>Ã§oÄŸunluk</em> onaylarsa suÃ§lanan aÃ§Ä±ÄŸa Ã§Ä±kar.</li>
                  <li><strong>Casusun Konum Tahmini:</strong> Casus, tur iÃ§inde uygun gÃ¶rdÃ¼ÄŸÃ¼ anda veya sÃ¼renin sonunda tek hakla konumu tahmin edebilir.</li>
                  <li><strong>SÃ¼re YÃ¶netimi:</strong> Zaman bittiÄŸinde tur durur ve son durum deÄŸerlendirilir.</li>
                </ol>
              
                <!-- Oyun Sonu -->
                <h4>ğŸ Oyun Sonu</h4>
                <ul>
                  <li><strong>VatandaÅŸlar kazanÄ±r:</strong> Oylamada gerÃ§ek casus Ã§oÄŸunlukla aÃ§Ä±ÄŸa Ã§Ä±karÄ±lÄ±rsa.</li>
                  <li><strong>Casus kazanÄ±r:</strong> Konumu doÄŸru tahmin ederse <em>veya</em> sÃ¼re biter de yanlÄ±ÅŸ kiÅŸi aÃ§Ä±ÄŸa Ã§Ä±karÄ±lÄ±rsa (ya da casus hiÃ§ yakalanmazsa).</li>
                </ul>
              
                <!-- Ä°puÃ§larÄ± -->
                <h4>ğŸ’¡ Ä°puÃ§larÄ±</h4>
                <ul>
                  <li><strong>VatandaÅŸlar iÃ§in:</strong>
                    <ul>
                      <li>Konumu ele vermeden bilgi test eden sorular sorun (kÄ±yafet kuralÄ±, gÃ¼venlik, yoÄŸunluk, ses, aÃ§Ä±k/kapalÄ± alan gibi).</li>
                      <li>ÅÃ¼pheli cevaplarÄ± not edin; oylamada hÄ±zlÄ± karar verirsiniz.</li>
                      <li>SorularÄ± sÄ±rayla ve kÄ±sa tutun ki herkes konuÅŸabilsin.</li>
                    </ul>
                  </li>
                  <li><strong>Casus iÃ§in:</strong>
                    <ul>
                      <li>Ã–zel isimlerden kaÃ§Ä±nÄ±n; tutarlÄ± ama â€œyuvarlakâ€ cevaplar verin.</li>
                      <li>DiÄŸerlerinin ipuÃ§larÄ±nÄ± toplayÄ±n, erken tahmin risklidir.</li>
                      <li>Birâ€“iki kÃ¼Ã§Ã¼k detay yakalarsanÄ±z, cevaplarÄ±nÄ±zÄ± onlarÄ±n etrafÄ±nda dÃ¶ndÃ¼rÃ¼n.</li>
                    </ul>
                  </li>
                </ul>
              
                <!-- KÄ±sa KÄ±sa Kurallar -->
                <h4>âš ï¸ KÄ±sa KÄ±sa Kurallar</h4>
                <ul>
                  <li>Konumun <strong>adÄ±nÄ±</strong> asla sÃ¶ylemeyin; ipuÃ§larÄ±yla konuÅŸun.</li>
                  <li>SuÃ§lama olduÄŸunda <strong>Ã§oÄŸunluk</strong> kararÄ± geÃ§erlidir; eÅŸitlikte oyun devam eder.</li>
                  <li>Casus, konumu doÄŸru tahmin ederse anÄ±nda kazanÄ±r.</li>
                  <li>VarsayÄ±lan sÃ¼re: 8 dakika; isterseniz lobide ayarlanabilir.</li>
                </ul>
              </div>
              
        </div>
    </div>

    <!-- Room Waiting Screen -->
    <div id="waitingRoom" class="screen">
        <div class="container">
            <div class="room-header">
                <h2>ğŸ  Oda: <span id="roomCodeDisplay"></span></h2>
                <p class="room-status">Oyuncular bekleniyor...</p>
            </div>
            
            <div class="players-list">
                <h3>ğŸ‘¥ Oyuncular (<span id="playerCount">0</span>/8)</h3>
                <div id="playersList"></div>
            </div>
            
            <!-- Game Settings (Host Only) -->
            <div id="gameSettings" class="game-settings" style="display: none;">
                <h3>ğŸ® Oyun AyarlarÄ±</h3>
                
                <div class="setting-group">
                    <label>Kategori: <strong>Klasik Spyfall</strong></label>
                    <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 4px;">
                        72 lokasyon ve rollerle orijinal Spyfall deneyimi
                    </p>
                </div>
                
                <div class="setting-group">
                    <label for="durationSelect">SÃ¼re:</label>
                    <select id="durationSelect">
                        <option value="300">5 dakika</option>
                        <option value="480" selected>8 dakika</option>
                        <option value="600">10 dakika</option>
                        <option value="900">15 dakika</option>
                    </select>
                </div>
                
                <!-- Spy count removed - official Spyfall always has exactly 1 spy -->
                
                <!-- Role adherence option removed - will be added to rulebook later -->
                
                <div class="setting-group">
                    <label for="categorySelect">Kategori:</label>
                    <select id="categorySelect">
                        <option value="Klasik">Klasik Spyfall</option>
                        <option value="custom">Ã–zel Kategori</option>
                    </select>
                    <button id="downloadKlasikBtn" class="btn btn-secondary">ğŸ’¾ Klasik Ä°ndir</button>
                </div>
                
                <div id="customLocationControls" style="display: none;">
                    <div class="setting-group">
                        <label for="customCategoryName">Kategori AdÄ±:</label>
                        <input type="text" id="customCategoryName" placeholder="Kategori adÄ± girin...">
                    </div>
                    
                    <div class="setting-group">
                        <button id="uploadLocationsBtn" class="btn btn-secondary">ğŸ“ Dosya YÃ¼kle</button>
                        <input type="file" id="locationFileInput" accept=".json" style="display: none;">
                        <button id="downloadLocationsBtn" class="btn btn-secondary">ğŸ’¾ Ä°ndir</button>
                        <button id="editLocationsBtn" class="btn btn-secondary">âœï¸ DÃ¼zenle</button>
                    </div>
                </div>

            </div>

            <div class="room-actions">
                <button id="startGameBtn" class="btn btn-primary" style="display: none;">
                    ğŸ® Oyunu BaÅŸlat
                </button>
                <button id="leaveRoomBtn" class="btn btn-danger">
                    ğŸšª Odadan AyrÄ±l
                </button>
            </div>
            
            <div class="room-info">
                <p><strong>Min 4 oyuncu</strong> ile oyun baÅŸlatÄ±labilir</p>
                <p>Host oyunu baÅŸlatabilir</p>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="container">
            <!-- Game Header -->
            <div class="game-header">
                <div class="timer">
                    <span class="timer-icon">â±ï¸</span>
                    <span id="gameTimer">08:00</span>
                </div>
                <div class="room-code">
                    Oda: <span id="gameRoomCode"></span>
                </div>
            </div>

            <!-- Peek Role Button -->
            <div class="peek-section">
                <button id="peekRoleBtn" class="btn btn-secondary">
                    ğŸ‘ï¸ RolÃ¼nÃ¼ GÃ¶r
                </button>
            </div>

            <!-- Game Info -->
            <div id="gameInfo" class="game-info-panel">
                <div class="info-item">
                    <span class="info-label">Casus SayÄ±sÄ±:</span>
                    1
                </div>
                <div class="info-item">
                    <span class="info-label">Kalan Casus:</span>
                    <span id="remainingSpiesDisplay">1</span>
                </div>
            </div>

            <!-- Locations Reference -->
            <div id="spyLocations" class="locations-panel" style="display: none;">
                <h4>ğŸ—ºï¸ OlasÄ± Lokasyonlar <span id="categoryName" style="display: none;"></span></h4>
                <div id="locationsList" class="locations-grid"></div>
            </div>

            <!-- Voting Status -->
            <div id="votingStatus" class="voting-status" style="display: none;">
                <h4>âš–ï¸ Oylama Devam Ediyor</h4>
                <p>Oy SayÄ±sÄ±: <span id="voteCount">0</span> / <span id="totalVotes">0</span></p>
            </div>

            <!-- Players in Game -->
            <div class="game-players">
                <h4>ğŸ‘¥ Oyuncular</h4>
                <div id="gamePlayersList"></div>
            </div>

            <!-- Game Actions -->
            <div class="game-actions">
                <button id="startVotingBtn" class="btn btn-warning">
                    ğŸš¨ SuÃ§lama BaÅŸlat
                </button>
                <button id="spyGuessBtn" class="btn btn-danger" style="display: none;">
                    ğŸ¯ Lokasyonu Tahmin Et
                </button>
            </div>
        </div>
    </div>

    <!-- Game End Screen -->
    <div id="gameEndScreen" class="screen">
        <div class="container">
            <div class="game-result">
                <h2 id="gameResultTitle"></h2>
                <p id="gameResultDescription"></p>
                
                <div class="game-info">
                    <p><strong>Lokasyon:</strong> <span id="finalLocation"></span></p>
                    <p><strong>Casus:</strong> <span id="finalSpy"></span></p>
                </div>
                
                <div class="scores-section">
                    <h3>ğŸ“Š Skorlar</h3>
                    <div id="finalScores"></div>
                </div>
                
                <div class="end-actions">
                    <button id="newRoundBtn" class="btn btn-primary" style="display: none;">
                        ğŸ”„ Yeni Round
                    </button>
                    <button id="backToMenuBtn" class="btn btn-secondary">
                        ğŸ  Ana MenÃ¼ye DÃ¶n
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Role Peek Modal -->
    <div id="roleModal" class="modal">
        <div class="modal-content">
            <div id="roleContent"></div>
            <div class="modal-actions">
                <button id="closeRoleBtn" class="btn btn-secondary">Kapat</button>
            </div>
        </div>
    </div>

    <!-- Voting Modal -->
    <div id="votingModal" class="modal">
        <div class="modal-content">
            <h3>âš–ï¸ Kimi Elemek Ä°stiyorsun?</h3>
            <div id="votingPlayersList"></div>
            <div class="modal-actions">
                <button id="confirmVoteBtn" class="btn btn-warning">Oy Ver</button>
                <button id="cancelVoteBtn" class="btn btn-secondary">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Spy Guess Modal -->
    <div id="spyGuessModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ¯ Hangi Lokasyon?</h3>
            <select id="locationGuessSelect">
                <option value="">Lokasyon seÃ§in...</option>
            </select>
            <div class="modal-actions">
                <button id="confirmGuessBtn" class="btn btn-danger">Tahmin Et</button>
                <button id="cancelGuessBtn" class="btn btn-secondary">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Location Editor Modal -->
    <div id="locationEditorModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <h3>âœï¸ Lokasyon EditÃ¶rÃ¼</h3>
            
            <div class="location-editor">
                <div class="editor-section">
                    <h4>ğŸ“ Lokasyonlar</h4>
                    <div class="location-controls">
                        <input type="text" id="newLocationName" placeholder="Yeni lokasyon adÄ±...">
                        <button id="addLocationBtn" class="btn btn-primary">â• Ekle</button>
                    </div>
                    <ul id="locationList" class="editable-list"></ul>
                </div>
                
                <div class="editor-section" id="roleEditor">
                    <h4>ğŸ‘¥ Roller <span id="selectedLocationName" style="color: var(--accent-color);"></span></h4>
                    <p id="roleInstructions" style="font-size: 0.9em; color: #666; margin-bottom: 10px;">
                        Sol taraftan bir lokasyon seÃ§in, ardÄ±ndan burada roller ekleyin.
                    </p>
                    <div class="role-controls">
                        <input type="text" id="newRoleName" placeholder="Yeni rol adÄ±...">
                        <button id="addRoleBtn" class="btn btn-primary">â• Ekle</button>
                    </div>
                    <ul id="roleList" class="editable-list"></ul>
                </div>
            </div>
            
            <div class="modal-footer">
                <button id="saveLocationsBtn" class="btn btn-success">ğŸ’¾ Kaydet</button>
                <button id="cancelEditBtn" class="btn btn-secondary">âŒ Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Theme Toggle -->
    <div id="themeToggle" class="theme-toggle">
        <button id="themeBtn" class="theme-btn" title="Tema DeÄŸiÅŸtir">
            ğŸŒ™
        </button>
    </div>

    <!-- Error Toast -->
    <div id="errorToast" class="toast">
        <span id="errorMessage"></span>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
